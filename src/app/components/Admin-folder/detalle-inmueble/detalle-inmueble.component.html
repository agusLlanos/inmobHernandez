<nav aria-label="breadcrumb">
  <ol class="breadcrumb pb-3">
    <li class="breadcrumb-item"><a href="#">Home</a></li>
    <li class="breadcrumb-item">Inmuebles</li>
    <li class="breadcrumb-item active">Disponibles para Alquiler</li>
    <li class="breadcrumb-item active" aria-current="page">Detalle Inmueble</li>
  </ol>
  <button type="button" class="btn btn-secondary btn-sm" (click)="back()">
    <i class="fa-solid fa-arrow-rotate-left" style="color: #ffffff;"></i>
    Volver
  </button>

</nav>

<section class="mt-3" *ngIf="inmueb != null">
  <div class="card">
    <ul class="nav nav-tabs px-5" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
          role="tab" aria-controls="home" aria-selected="true">Detalle</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button"
          role="tab" aria-controls="profile" aria-selected="false">Fotos</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button"
          role="tab" aria-controls="contact" aria-selected="false">Ubicación</button>
      </li>
    </ul>

    <div class="tab-content px-5 pt-5 pb-5" id="myTabContent">
      <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <div class="row">
          <div class="col-sm-12">
            <!-- <div class="form-check form-switch  gap-2 d-md-flex justify-content-md-end font-"
              style="display: inline-flex;">
              <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked>
              <label class="form-check-label" for="flexSwitchCheckChecked">Alta</label>
            </div> -->
            <ng-container *ngIf="habilitar == false; else habilita">
            </ng-container>
            <ng-template #habilita>
              <div class="alert alert-primary d-flex align-items-center" role="alert">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
                  <use xlink:href="#info-fill" />
                </svg>
                <div>
                  El inmueble se encuentra dado de baja
                </div>
              </div>
            </ng-template>
            <div class="card">
              <div class="card-body">
                <label for="exampleFormControlInput1"
                  class="form-label font- border-bottom border-3 border-success pb-2 mt-4"
                  style="display: block;">Detalle
                  inmueble: Código
                  {{id_inmueble}}
                  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <button class="btn btn-success" type="button" name="modificar" name="botonEditar"
                      (click)="modificar()" *ngIf="nombreBoton =='Editar'; else guardar" [disabled]="habilitar">
                      <i class="fa-solid fa-pen-to-square" style="color: #ffffff;"></i>
                      {{nombreBoton}}</button>

                    <ng-template #guardar>
                      <button class="btn btn-success" type="button" name="modificar" name="botonEditar"
                        (click)="modificar()">
                        <i class="fa-solid fa-check" style="color: #ffffff;"></i>
                        {{nombreBoton}}</button>
                    </ng-template>
                  </div>
                </label>
                <div class="row">
                  <div class="col-12 col-sm-12 col-lg-10 d-flex justify-content-end pt-3">
                    <div *ngIf="nombreBoton =='Editar'; else edi">

                    </div>
                    <ng-template #edi class="">
                      <i class="fa-solid fa-pen-to-square fa-lg" style="color: #235344;"></i>
                    </ng-template>
                  </div>
                </div>
                <div class="row">
                  <div class="col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 col-xxl-6">
                    <div class="row">
                      <div class="col-sm-4 mt-5">
                        <label name="tipo" class="form-check-label" for="flexCheckChecked">Tipo</label>

                        <select class="form-select form-select-sm mt-2" name="tipo_inmue" [disabled]="editable"
                          *ngIf="editable; else tipo" [(ngModel)]="inmueb.id_tipoInmueble">
                          <option name="tipo_inm" value={{inmueb.id_tipoInmueble}} selected>{{inmueb.tipo_inmueble}}
                          </option>
                        </select>

                        <ng-template #tipo>
                          <select class="form-select form-select-sm mt-2" name="tipo_inm" [disabled]="editable"
                            [(ngModel)]="inmueb.id_tipoInmueble">
                            <option name="tipo_inm" *ngFor="let tipo of tipo_inmuebles" [value]="tipo.id_tipoInmueble">
                              {{tipo.descripcion}}</option>
                          </select>
                        </ng-template>

                      </div>

                      <div class="col-sm-4 mt-5">
                        <label class="form-check-label" for="flexCheckChecked" name="motivo">Motivo</label>

                        <select *ngIf="editable; else listaMotivo" class="form-select form-select-sm mt-2"
                          [disabled]="editable" name="motivo">
                          <option name="motivo" value=1 selected>{{inmueb.motivo}}</option>
                        </select>

                        <ng-template #listaMotivo>
                          <select class="form-select form-select-sm mt-2" name="motivo" [disabled]="editable"
                            [(ngModel)]="inmueb.id_motivo" ngDefaultControl>
                            <option name="motivo" *ngFor="let mot of listMotivos" value={{mot.id_motivo}}>{{mot.motivo}}
                            </option>
                          </select>
                        </ng-template>

                      </div>

                      <div class="col-sm-4 mt-5">
                        <label name="fecha_ingreso" class="form-check-label" for="flexCheckChecked">Fecha de
                          ingreso</label>
                        <input name="fecha_ingreso" id="startDate" class="form-control form-control-sm mt-2" type="date"
                          disabled ngDefaultControl [(ngModel)]="inmueb.fechaIngreso_date" />
                        <span id="startDateSelected"></span>
                      </div>

                    </div>

                    <div class="row g-2 mt-5">
                      <label for="exampleFormControlInput1" class="form-label font-" style="display: inline-flex;"
                        name="ubic">Ubicación</label>

                      <div class="col-sm-4 mt-3">
                        <label class="form-check-label" for="flexCheckChecked" name="calle">Calle</label>
                        <input type="text" class="form-control form-control-sm mb-2 mt-2" id="calle" name="calle"
                          [(ngModel)]="inmueb.calle" [disabled]="editable" ngDefaultControl>
                      </div>

                      <div class="col-sm-4 mt-3">
                        <label class="form-check-label" for="flexCheckChecked" name="numero">Número</label>
                        <input type="text" class="form-control form-control-sm mb-2 mt-2" name="numero"
                          [(ngModel)]="inmueb.numero" [disabled]="editable" ngDefaultControl>
                      </div>

                      <div class="col-sm-4 mt-3">
                        <label class="form-check-label" for="flexCheckChecked" name="ciudad">Ciudad</label>

                        <select class="form-select form-select-sm mt-2" name="ciudad" [disabled]="editable"
                          *ngIf="editable; else ciudad">
                          <option name="ciudad" value={{inmueb.id_ciudad}} selected>{{inmueb.ciudad}}</option>
                        </select>

                        <ng-template #ciudad>
                          <select class="form-select form-select-sm mt-2" [disabled]="editable"
                            [(ngModel)]="inmueb.id_ciudad">
                            <option [value]="ciu.id_ciudad" *ngFor="let ciu of listCiudad" value="{{ciu.descripcion}}">
                              {{ciu.descripcion}}</option>
                          </select>
                        </ng-template>

                      </div>

                    </div>
                  </div>
                  <div class="col-6 col-sm-6 col-md-6">
                    <img class="pt-3 py-5" src="assets\imagenes\imagen_inmueble\{{inmueb.nombreArchivo}}" width="450"
                      height="350">

                  </div>
                </div>

                <div class="row g-3 mt-5">

                  <div class="col-sm-2 pt-4">
                    <label for="exampleFormControlInput1" class="form-label font-" style="display: inline-flex;"
                      name="cuenta">
                      Cuenta con</label>
                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="patio" id="flexCheckDefault"
                        [(ngModel)]="inmueb.patio" (click)="noEditable($event)" ngDefaultControl>

                      <label class="form-check-label" for="flexCheckDefault" name="patio">
                        Patio
                      </label>
                    </div>

                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="cochera" id="flexCheckDefault"
                        [(ngModel)]="inmueb.cochera" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="cochera">
                        Cochera
                      </label>
                    </div>

                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="balcon" id="flexCheckDefault"
                        [(ngModel)]="inmueb.balcon" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="balcon">
                        Balcon
                      </label>
                    </div>

                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="comedor" id="flexCheckDefault"
                        [(ngModel)]="inmueb.comedor" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="comedor">
                        Comedor
                      </label>
                    </div>

                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="cocina" id="flexCheckDefault"
                        [(ngModel)]="inmueb.cocina" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="cocina">
                        Cocina
                      </label>
                    </div>

                    <div class="form-check mx-3">
                      <input class="form-check-input" type="checkbox" name="terraza" id="flexCheckDefault"
                        [(ngModel)]="inmueb.terraza" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="terraza">
                        Terraza
                      </label>
                    </div>

                  </div>

                  <div class="col-sm-2 pt-5">
                    <div class="form-check pt-3">
                      <input class="form-check-input" type="checkbox" name="cloaca" id="flexCheckDefault"
                        [(ngModel)]="inmueb.cloaca" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="cloaca">
                        Cloaca
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="lavadero" id="flexCheckDefault"
                        [(ngModel)]="inmueb.lavadero" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="lavadero">
                        Lavadero
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="living" id="flexCheckDefault"
                        [(ngModel)]="inmueb.living" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="living">
                        Living
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="ascensor" id="flexCheckDefault"
                        [(ngModel)]="inmueb.ascensor" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="ascensor">
                        Ascensor
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="aire_acond" id="flexCheckDefault"
                        [(ngModel)]="inmueb.aire_acond" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="aire_acond">
                        Aire Acond.
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="amoblado" id="flexCheckDefault"
                        [(ngModel)]="inmueb.amoblado" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="amoblado">
                        Amoblado
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="pileta" id="flexCheckDefault"
                        [(ngModel)]="inmueb.pileta" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="pileta">
                        Pileta
                      </label>
                    </div>

                  </div>

                  <div class="col-sm-3 pt-4" id="idServicios">
                    <label for="exampleFormControlInput1" class="form-label font-" name="servicios">Servicios</label>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="agua" id="flexCheckDefault"
                        [(ngModel)]="inmueb.agua" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="agua">
                        Agua
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="gas" id="flexCheckDefault"
                        [(ngModel)]="inmueb.gas" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="gas">
                        Gas
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="calefaccion" id="flexCheckDefault"
                        [(ngModel)]="inmueb.calefaccion" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="calefaccion">
                        Calefacción
                      </label>
                    </div>

                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" name="luz" id="flexCheckDefault"
                        [(ngModel)]="inmueb.luz" (click)="noEditable($event)">
                      <label class="form-check-label" for="flexCheckDefault" name="luz">
                        Luz
                      </label>
                    </div>
                  </div>

                  <div class="col-sm-3 pt-4">
                    <label for="exampleFormControlInput1" class="form-label font-" style="display: inline-flex;"
                      name="costo">Costo</label><br>

                    <label class="form-check-label" for="flexCheckDefault" name="costo">Precio inicial</label>

                    <input type="number" class="form-control form-control-sm mt-3" id="hab" name="hab"
                      id="flexCheckDefault" [(ngModel)]="inmueb.costo_inicial" [disabled]="editable">
                    <label class="form-check-label pt-3" for="flexCheckDefault">Moneda</label>

                    <select class="form-select form-select-sm mt-2" name="moneda" [disabled]="editable"
                      *ngIf="editable; else moneda">
                      <option selected>{{inmueb.desc_moneda}}</option>
                    </select>

                    <ng-template #moneda>
                      <select class="form-select form-select-sm mt-2" name="moneda" [disabled]="editable"
                        [(ngModel)]="inmueb.id_moneda">
                        <option name="tipo_mon" *ngFor="let mon of listMoneda" value={{mon.id_moneda}} selected>
                          {{mon.descripcion}}</option>
                      </select>
                    </ng-template>

                  </div>
                </div>

                <div class="row mt-5 pb-5">
                  <div class="col-sm-3">
                    <label class="form-check-label pb-3 mx-3" for="flexCheckDefault" name="banios">Cant.baños</label>
                    <input type="number" class="form-control form-control-sm" id="banios" name="banios"
                      id="flexCheckDefault" [(ngModel)]="inmueb.cant_banios" [disabled]="editable" ngDefaultControl>
                  </div>

                  <div class="col-sm-3">
                    <label class="form-check-label pb-3 mx-3" for="flexCheckDefault" name="hab">Cant.habitac</label>
                    <input type="number" class="form-control form-control-sm" id="hab" name="hab" id="flexCheckDefault"
                      [(ngModel)]="inmueb.cant_habit" [disabled]="editable">
                  </div>

                  <div class="col-sm-3">
                    <label class="form-check-label pb-3 mx-3" for="flexCheckDefault"
                      name="antiguedad">Antiguedad</label>
                    <input type="text" class="form-control form-control-sm" id="antiguedad" name="antiguedad"
                      id="flexCheckDefault" [(ngModel)]="inmueb.antiguedad" [disabled]="editable">
                  </div>

                  <div class="col-sm-3">
                    <label class="form-check-label pb-3 mx-3" for="flexCheckDefault" name="medidas">Medidas Lote</label>
                    <input type="text" class="form-control form-control-sm" id="medidas" name="medidas"
                      id="flexCheckDefault" [(ngModel)]="inmueb.medidas_lote" [disabled]="editable">
                  </div>

                </div>

                <div class="row g-3 mt-3">
                  <label for="exampleFormControlInput1" class="form-label font-" style="display: inline-flex;"
                    name="Propietario">Propietario</label>
                  <div class="col-sm-5">
                    <select class="form-select form-select-sm mt-2" name="prop" [disabled]="editable"
                      [(ngModel)]="inmueb.id_propietario">
                      <option name="prop" *ngFor="let p of propietarios" value={{p.id_propietario}} selected>
                        {{p.apeNom}}</option>
                    </select>
                  </div>

                </div>

                <div class="row g-3 mt-5">
                  <div class="col-sm-10 mt-3">
                    <label for="exampleFormControlInput1" class="form-label font-" id="flexCheckDefault"
                      style="display: inline-flex;" name="observaciones">Observaciones</label>
                    <textarea class="form-control mx-3" id="exampleFormControlTextarea1" rows="3" name="observaciones"
                      [(ngModel)]="inmueb.observaciones" ngDefaultControl [disabled]="editable"
                      ngDefaultControl></textarea>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade min-vh-100" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <div class="container-lg">
          <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3">
            <div *ngFor="let imagen of img_inmuee">
              <div class="col pt-3">               
                <img src="assets\imagenes\imagen_inmueble\{{imagen.nombreArchivo}}" width="300" height="250"
                  id="img-inmueble" (click)="openXl(content, imagen.posicion)">
                <ng-template #content let-modal>
                  <div class="modal-header">
                    <button type="button" class="btn-close" aria-label="Close"
                      (click)="modal.dismiss('Cross click')"></button>
                  </div>
                  <div class="modal-body">
                    <div class="picsum-img-wrapper d-flex justify-content-md-center">
                      <img src="assets\imagenes\imagen_inmueble\{{img_inmuee[posic].nombreArchivo}}" width="1000"
                        height="550" id="img-inmueble">
                    </div>                  
                  </div>
                  <div class="modal-footer">
                     <div class="container">
                      <div class="row">
                        <div class="col-6"><i class="fa-solid fa-chevron-left fa-lg d-flex justify-content-start" (click)="cambiarImagen(operador = 'restar');"></i></div>
                      <div class="col-6 d-flex justify-content-end"><i class="fa-solid fa-chevron-right fa-lg" (click)="cambiarImagen(operador = 'sumar');"></i></div>
                      </div>
                      
                      
                 <!--     <div class="col-6">
                        
                      </div>
                      <div class="col-6">
                        
                      </div>-->
                    </div> 

                  </div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4291.585136597917!2d-60.206193629985215!3d-33.33855379690298!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95b75d797033c9f9%3A0x6a8f3703b02bc5d7!2sRivadavia%20547%2C%20San%20Nicol%C3%A1s%20de%20Los%20Arroyos%2C%20Provincia%20de%20Buenos%20Aires!5e0!3m2!1ses-419!2sar!4v1685497551372!5m2!1ses-419!2sar"
          width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>

    </div>
  </div>
</section>